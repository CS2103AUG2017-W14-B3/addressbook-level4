<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.3">
<title>Lim Jun Quan - Project Portfolio</title>
<link rel="stylesheet" href="../stylesheets/gh-pages.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.4.0/css/font-awesome.min.css">
<link rel="stylesheet" href="../stylesheets/coderay-asciidoctor.css">
</head>
<body class="article">
<div id="header">
<h1>Lim Jun Quan - Project Portfolio</h1>
</div>
<div id="content">
<div class="sect1">
<h2 id="project-addressbook-level-4"><a class="link" href="#project-addressbook-level-4">Project: AddressBook - Level 4</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>HitMeUp is an address book application designed with the sociable user in mind. It aims to provide a one stop solution for every need: To contact, keep up
and organise.
With the cloud import feature, a user would be able to get the application
up and running a matter of minutes. Being able to group your contacts, and view each group at a glance affords
convenience like never before. Social integration to Instagram and Twitter is baked in, allowing users to view profiles
in the application itself without having to switch to a browser or check their phone.</p>
</div>
<div class="paragraph">
<p><strong>Code contributed</strong>: [{repoURL}/tree/master/collated/main/JunQuann.md[Functional code]] [{repoURL}/tree/master/collated/test/JunQuann.md[[Test code]]</p>
</div>
<div class="sect2">
<h3 id="enhancement-added-developed-the-graphic-user-interface"><a class="link" href="#enhancement-added-developed-the-graphic-user-interface">Enhancement Added: Developed the Graphic User Interface</a></h3>
<div class="imageblock">
<div class="content">
<img src="../images/UI.png" alt="UI" width="800">
</div>
</div>
<div class="sect3">
<h4 id="justification"><a class="link" href="#justification">Justification</a></h4>
<div class="paragraph">
<p>An user interface based on material design will allow a good user experience as it is aesthetically pleasing.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="enhancement-added-display-picture-for-contacts"><a class="link" href="#enhancement-added-display-picture-for-contacts">Enhancement Added: Display Picture for contacts</a></h3>
<hr>
<div class="paragraph">
<p><mark>Start of Extract [from: User Guide]</mark></p>
</div>
</div>
<div class="sect2">
<h3 id="adding-a-person-code-add-code"><a class="link" href="#adding-a-person-code-add-code">Adding a person: <code>add</code></a></h3>
<div class="paragraph">
<p>Adds a person to the application.<br></p>
</div>
<div class="paragraph">
<p>Format: <code>add n/NAME p/PHONE_NUMBER [e/EMAIL] [a/ADDRESS] [b/BIRTHDAY] [tw/TWITTER] [ig/INSTAGRAM] [dp/] [t/TAG]&#8230;&#8203;</code></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="ulist">
<ul>
<li>
<p>Only the name and phone number field must be provided.</p>
</li>
<li>
<p>Duplicated person, where all the fields excluding tag and display picture choice are exactly the same, cannot be added.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="exampleblock">
<div class="content">
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
A person can have any number of tags (including 0).
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="exampleblock">
<div class="content">
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
If you do not have a display picture to add, leave out the dp/ prefix.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="paragraph">
<p>Example:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="ulist">
<ul>
<li>
<p><code>add n/John Doe p/98765432 e/johnd@example.com a/John street, block 123, #01-01 b/19/09/1999 tw/john_doe dp/</code><br></p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Pops up the file chooser for user to choose the image they want to set as display picture.</p>
<div class="imageblock">
<div class="content">
<img src="../images/AddDP1.png" alt="width"800">
</div>
</div>
</li>
<li>
<p>Adds a person called <strong>John Doe</strong> with a phone number of <strong>98765432</strong>, an email address of <strong>johnd@example.com</strong>, an address of <strong>John street,
block 123, #01-01</strong>, a Twitter username of <strong>john_doe</strong>.
John Doe is also added with the image chosen as his display picture.</p>
<div class="imageblock">
<div class="content">
<img src="../images/AddDP2.png" alt="width"800">
</div>
</div>
</li>
<li>
<p>The image is copied into the designated display picture storage directory with a unique name.</p>
<div class="imageblock">
<div class="content">
<img src="../images/AddDP3.png" alt="width"800">
</div>
</div>
</li>
</ol>
</div>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="editing-a-person-code-edit-code"><a class="link" href="#editing-a-person-code-edit-code">Editing a person : <code>edit</code></a></h3>
<div class="paragraph">
<p>Edits an existing person in the application.<br></p>
</div>
<div class="paragraph">
<p>Format: <code>edit INDEX [n/NAME] [p/PHONE] [e/EMAIL] [a/ADDRESS] [b/BIRTHDAY] [tw/TWITTER]
[ig/INSTAGRAM] [dp/] [t/TAG]&#8230;&#8203;</code></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="ulist">
<ul>
<li>
<p>Edits the person at the specified <code>INDEX</code>. The index refers to the index number shown in the last person listing. The index <strong>must be a positive integer</strong> 1, 2, 3, &#8230;&#8203;</p>
</li>
<li>
<p>If a change in person&#8217;s name ends up affecting the alphabetical order, the list of contacts will be resorted.</p>
</li>
<li>
<p>At least one of the optional fields must be provided.</p>
</li>
<li>
<p>Existing values will be updated to the input values.</p>
</li>
<li>
<p>When editing tags, the existing tags of the person will be removed i.e adding of tags is not cumulative.</p>
</li>
<li>
<p>You can remove all the person&#8217;s tags by typing <code>t/</code> without specifying any tags after it.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="paragraph">
<p>Examples:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>edit 1 p/91234567 e/johndoe@example.com</code><br>
Edits the phone number and email address of the 1st person to be <code>91234567</code> and <code>johndoe@example.com</code> respectively.</p>
</li>
<li>
<p><code>edit 2 n/Betsy Crower t/</code><br>
Edits the name of the 2nd person to be <code>Betsy Crower</code> and clears all existing tags.</p>
</li>
<li>
<p><code>edit 3 dp/</code><br></p>
</li>
</ul>
</div>
<div class="exampleblock">
<div class="content">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Pops up the file chooser for user toc hoose the image they want to set as display picture.<br></p>
<div class="imageblock">
<div class="content">
<img src="../images/EditDP1.png" alt="EditDP1" width="800">
</div>
</div>
</li>
<li>
<p>Display picture of the 3rd person is changed to the chosen image.<br></p>
<div class="imageblock">
<div class="content">
<img src="../images/EditDP2.png" alt="EditDP2" width="800">
</div>
</div>
</li>
<li>
<p>The image is copied into the designated display picture storage directory with a unique name.<br></p>
<div class="imageblock">
<div class="content">
<img src="../images/EditDP3.png" alt="EditDP3" width="800">
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="paragraph">
<p><mark>End of Extract</mark></p>
</div>
<hr>
<div class="sect3">
<h4 id="justification-2"><a class="link" href="#justification-2">Justification</a></h4>
<div class="paragraph">
<p>Having a display picture for each contact not only beautify the User Interface but also help users to remember their contacts easily.</p>
</div>
</div>
<div class="sect3">
<h4 id="implementation"><a class="link" href="#implementation">Implementation</a></h4>
<hr>
<div class="paragraph">
<p><mark>Start of Extract [from: Developer Guide]</mark></p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="display-picture-mechanism"><a class="link" href="#display-picture-mechanism">Display Picture Mechanism</a></h3>
<div class="paragraph">
<p>This feature is facilitated by javafx <code>FileChooser</code> and java <code>IO</code> class. It supports choosing of images from hard disk via a pop up and
copies the chosen image into the designated image storage folder indicated in <code>UserPref</code>. The chosen image will then be displayed
in the <code>GUI</code> for reference to the specific contact.</p>
</div>
<div class="sect3">
<h4 id="display-picture-implementation"><a class="link" href="#display-picture-implementation">Display picture implementation</a></h4>
<div class="paragraph">
<p>This section will discuss the implementation of the display picture feature.<br></p>
</div>
<div class="imageblock">
<div class="content">
<img src="../images/DisplayPicLogicSequenceDiagram.png" alt="DisplayPicLogicSequenceDiagram" width="800">
</div>
</div>
<div class="paragraph">
<p><em>Figure 5.5.1 shows a sequence diagram of editing the display picture of a person</em></p>
</div>
<div class="paragraph">
<p>From the diagram above, we can see that additional work is done at <code>ArgumentTokenizer</code> in order to get the final display picture path with resides in the designated display picture file directory.<br>
<br>
Since <code>ArgumentTokenizer</code> is only called in <code>AddCommandParser</code> and <code>EditCommandParser</code>, writing <code>dp/</code> in other command will not cause the display picture feature to be called.<br>
<br>
When <code>dp/</code> is present in the command, <code>getCurrentImgPath</code> will be called. This function returns the path of the image that the user want to set as his display picture. Afterwards,
<code>createUniqueDisplayName</code> will create a unique name for the image chosen by hashing all the other fields of the person.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">private</span> <span class="directive">static</span> <span class="predefined-type">String</span> createUniqueDisplayPicName(ArgumentMultimap argMultimap, <span class="predefined-type">String</span> currentImgPath, Prefix... prefixes) {
    <span class="predefined-type">String</span> displayPicName = currentImgPath;
    <span class="keyword">for</span> (Prefix prefix : prefixes) {
        displayPicName += argMultimap.getValue(prefix);
    }
    <span class="keyword">return</span> <span class="predefined-type">String</span>.valueOf(displayPicName.hashCode());
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Since duplicated users cannot be added, by hashing all the fields of a person, we can ensure that a unique hashcode is created which will then be used as the filename for the image.<br>
This is to ensure that images in the display picture file folder will not be overwritten as files with same name will overwrite each other.<br>
<br>
 Afterwards, <code>getFinalImgPath</code> will return the display picture file path that has been copied to the designated display picture folder. This path will be the value for the prefix <code>dp/</code>, which will be parsed into the respective command parsers.</p>
</div>
</div>
<div class="sect3">
<h4 id="event-processes-for-choosing-and-copying-of-display-picture"><a class="link" href="#event-processes-for-choosing-and-copying-of-display-picture">Event processes for choosing and copying of display picture</a></h4>
<div class="paragraph">
<p>This section will discuss the flow of events when users wants to select display pictures for their contacts.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../images/SDforDisplayPic.png" alt="SDforDisplayPic" width="800">
</div>
</div>
<div class="paragraph">
<p><em>Figure 5.5.2a shows the interaction between components for <code>edit 1 dp/</code> command (part 1)</em></p>
</div>
<div class="paragraph">
<p>The above diagrams shows the series of event when <code>ArgumentTokenizer</code> detects the prefix <code>dp/</code>.<br>
The following code snippets will show how the events are posted within each methods.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">private</span> <span class="directive">static</span> <span class="predefined-type">String</span> getCurrentImgPath() {
    FileChooserEvent fileChooserEvent = <span class="keyword">new</span> FileChooserEvent();
    EventsCenter.getInstance().post(fileChooserEvent);
    <span class="keyword">return</span> fileChooserEvent.getImgPath();
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>getCurrentImgPath</code> posts the <code>FileChooserEvent</code> which will be handled by <code>UI</code> to retrieve the path of the chosen image for the display picture.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">private</span> <span class="directive">static</span> <span class="predefined-type">String</span> getFinalImgPath(<span class="predefined-type">String</span> hashedDisplayPicName, <span class="predefined-type">String</span> imgPath) {
    NewImageEvent newImageEvent = <span class="keyword">new</span> NewImageEvent(hashedDisplayPicName, imgPath);
    EventsCenter.getInstance().post(newImageEvent);
    <span class="keyword">return</span> newImageEvent.getImagePath();
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>getFinalImgPath</code> posts the <code>NewImageEvent</code> which will be handled by <code>Storage</code> to retrieve the final display picture path in the designated display picture directory.<br>
<br>
 The following diagram shows how the the events posted previously are being handled:<br></p>
</div>
<div class="imageblock">
<div class="content">
<img src="../images/SDforDisplayPicHandling.png" alt="SDforDisplayPicHandling" width="800">
</div>
</div>
<div class="paragraph">
<p><em>Figure 5.5.2b shows the interaction between components for <code>edit 1 dp/</code> command (part 2)</em></p>
</div>
<div class="paragraph">
<p>When <code>FileChooserEvent</code> is posted, it will be handled by <code>UI</code> and the method <code>getDisplayPicPath</code> will be called.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">private</span> <span class="predefined-type">String</span> getDisplayPicPath() {
    FileChooser fileChooser = <span class="keyword">new</span> FileChooser();
    FileChooser.ExtensionFilter extFilter = <span class="keyword">new</span> FileChooser.ExtensionFilter(<span class="string"><span class="delimiter">&quot;</span><span class="content">PICTURE files</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">*.jpg</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">*.png</span><span class="delimiter">&quot;</span></span>);
    fileChooser.getExtensionFilters().add(extFilter);
    <span class="predefined-type">File</span> selectedFile = fileChooser.showOpenDialog(primaryStage);
    <span class="keyword">if</span> (selectedFile != <span class="predefined-constant">null</span>) {
        <span class="keyword">return</span> selectedFile.getAbsolutePath();
    } <span class="keyword">else</span> {
        <span class="keyword">return</span> DEFAULT_DP;
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>This method will initiate a pop up in the <code>GUI</code> of HitMeUp for the user to choose the image they want to use. Afterwards, it returns the absolute path of the chosen image.</p>
</div>
<div class="paragraph">
<p>Afterwards, <code>NewImageEvent</code> will be posted and handled by <code>Storage</code>, the method <code>copyImageFile</code> will be called.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="type">void</span> copyImage(<span class="predefined-type">String</span> currentImagePath, <span class="predefined-type">String</span> imageName) <span class="directive">throws</span> <span class="exception">IOException</span> {
    <span class="predefined-type">File</span> currentImage = <span class="keyword">new</span> <span class="predefined-type">File</span>(currentImagePath);
    <span class="predefined-type">BufferedInputStream</span> bis = <span class="keyword">new</span> <span class="predefined-type">BufferedInputStream</span>(<span class="keyword">new</span> <span class="predefined-type">FileInputStream</span>(currentImage));
    createImageDir();
    <span class="predefined-type">String</span> newImagePath = getImageFilePath(imageName);
    <span class="predefined-type">BufferedOutputStream</span> bos = <span class="keyword">new</span> <span class="predefined-type">BufferedOutputStream</span>(<span class="keyword">new</span> <span class="predefined-type">FileOutputStream</span>(newImagePath));

    <span class="type">int</span> data;

    <span class="keyword">while</span> ((data = bis.read()) != -<span class="integer">1</span>) {
        bos.write(data);
    }

    bis.close();
    bos.close();
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>This method will copy the chosen image into the designated display picture storage folder and return the path to the copied image.
The returned path will be stored as the display picture value of a person.</p>
</div>
</div>
<div class="sect3">
<h4 id="design-considerations"><a class="link" href="#design-considerations">Design Considerations</a></h4>
<div class="paragraph">
<p><strong>Aspect:</strong> When to implement the feature<br>
<strong>Alternative 1 (current choice):</strong> Prompts for display picture when parser detects <code>dp/</code> in <code>add</code> or <code>edit</code> commands<br>
<strong>Pros:</strong> Natural flow of event as users can decide to add a display picture while adding the person<br>
<strong>Cons:</strong> Much more complex implementation is needed as we have to intercept the parsing of <code>add</code> or <code>edit</code> commands to add information for display picture<br>
<strong>Alternative 2:</strong>  Have a separate command <code>DisplayPic [INDEX]</code> to select a display picture for the person at <code>INDEX</code> after adding the person<br>
<strong>Pros:</strong> Easier implementation as it is very similar to the existing <code>edit</code> command<br>
<strong>Cons:</strong> Troublesome as users will need 2 step to add a display picture for their contacts<br></p>
</div>
<hr>
<div class="paragraph">
<p><strong>Aspect:</strong> How to select display picture<br>
<strong>Alternative 1 (current choice):</strong> Use a FileChooser and allow Users to select the file<br>
<strong>Pros:</strong> Convenient for users as  to select the file<br>
<strong>Cons:</strong> No longer a CLI interface<br>
<strong>Cons:</strong> Hard to deploy JUnit testing as there are not way to automate the choosing of files in FileChooser<br>
<strong>Alternative 2:</strong> Users find the path of the file themselves and add it into the command<br>
<strong>Pros:</strong> CLI interface<br>
<strong>Cons:</strong> Hard for users who are not tech-savvy to find know the path of the image file<br></p>
</div>
<hr>
<div class="paragraph">
<p><strong>Aspect:</strong> How is chosen image made accessible in the storage<br>
<strong>Alternative 1 (current choice):</strong> Copying the chosen image into the designated storage path<br>
<strong>Pros:</strong> Image will still be present at original path for users to use the image<br>
<strong>Cons:</strong> Inefficient memory usage as duplicate copy of the same image is made<br>
<strong>Alternative 2:</strong> Moving the chosen image to the designated storage path<br>
<strong>Pros:</strong> Efficient memory usage as duplicate copies will not be created<br>
<strong>Cons:</strong> Users may have difficulty finding the chosen image for later use as they will be renamed to prevent overwriting of image in the designated storage<br></p>
</div>
<hr>
<div class="paragraph">
<p><mark>End of Extract</mark></p>
</div>
<hr>
</div>
</div>
<div class="sect2">
<h3 id="enhancement-proposed"><a class="link" href="#enhancement-proposed">Enhancement Proposed:</a></h3>
<div class="paragraph">
<p>Delete the picture in display picture storage directory when the image is not used anymore.</p>
</div>
</div>
<div class="sect2">
<h3 id="other-contributions"><a class="link" href="#other-contributions">Other contributions</a></h3>
<div class="ulist">
<ul>
<li>
<p>Made UI MockUp based on material design using Adobe PhotoShop.</p>
<div class="imageblock">
<div class="content">
<img src="../images/AddressBookUI.png" alt="AddressBookUI" width=""800'">
</div>
</div>
<div class="paragraph">
<p><em>Picture above shows mock up UI for HitMeUp</em></p>
</div>
</li>
<li>
<p>Added PersonDescriptionPanel in User Interface</p>
<div class="imageblock">
<div class="content">
<img src="../images/PersonDescriptionPanel.png" alt="PersonDescriptionPanel" width="800">
</div>
</div>
<div class="paragraph">
<p><em>Figure above shows the GUI of HitMeUp, PersonDescriptionPanel is outlined in red</em></p>
</div>
</li>
<li>
<p>Added DisplayPic field for person</p>
</li>
<li>
<p>Wrote test cases for all features that were implemented by me.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2017-11-12 18:27:13 +00:00
</div>
</div>
</body>
</html>