<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.3">
<title>Conant Teo Jia Yu - Project Portfolio</title>
<link rel="stylesheet" href="../stylesheets/gh-pages.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.4.0/css/font-awesome.min.css">
<link rel="stylesheet" href="../stylesheets/coderay-asciidoctor.css">
</head>
<body class="article">
<div id="header">
<h1>Conant Teo Jia Yu - Project Portfolio</h1>
</div>
<div id="content">
<div class="sect1">
<h2 id="project-addressbook-level-4"><a class="link" href="#project-addressbook-level-4">Project: AddressBook - Level 4</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>AddressBook - Level 4 is a desktop address book application used for teaching Software Engineering principles. The user interacts with it using a CLI, and it has a GUI created with JavaFX. It is written in Java, and has about 6 kLoC.</p>
</div>
<div class="paragraph">
<p><strong>Code contributed</strong>: to be updated</p>
</div>
<div class="sect2">
<h3 id="enhancement-added-vcard-export"><a class="link" href="#enhancement-added-vcard-export">Enhancement Added: vCard Export</a></h3>
<div class="sect3">
<h4 id="external-behavior"><a class="link" href="#external-behavior">External behavior</a></h4>
<hr>
<div class="paragraph">
<p><mark>Start of Extract [from: User Guide]</mark></p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="exporting-contacts-code-export-code"><a class="link" href="#exporting-contacts-code-export-code">Exporting contacts : <code>export</code></a></h3>
<div class="paragraph">
<p>Allows you to export contacts from HitMeUp into a vCard file.</p>
</div>
<div class="paragraph">
<p>Format: <code>export all</code> or <code>export INDEX [INDEX]&#8230;&#8203;</code></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="ulist">
<ul>
<li>
<p>Exports all information of all contacts or the contact at the specified INDEX into a vCard file.</p>
</li>
<li>
<p>The input 'all' is case-sensitive.</p>
</li>
<li>
<p>The index refers to the index number shown in the most recent listing.</p>
</li>
<li>
<p>The index must be a positive integer 1, 2, 3, &#8230;&#8203;</p>
</li>
<li>
<p>The data folder directory where the vCard file ("contacts.vcf") is located will be displayed after a successful export as shown below.</p>
</li>
<li>
<p>If you would like to move this vCard file to another folder, please close HitMeUp first.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="paragraph">
<p><span class="image"><img src="../images/ExportDirectory.png" alt="ExportDirectory" width="790"></span>
<em>Figure 3.12. Data folder directory containing vCard file</em></p>
</div>
<div class="paragraph">
<p>Examples:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>export all</code><br>
Exports all contacts into a vCard file.</p>
</li>
<li>
<p><code>list</code><br>
<code>export 1 2</code><br>
Exports the 1st and 2nd persons from the list of contacts into a vCard file.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><mark>End of Extract</mark></p>
</div>
<hr>
<div class="sect3">
<h4 id="implementation"><a class="link" href="#implementation">Implementation</a></h4>
<hr>
<div class="paragraph">
<p><mark>Start of Extract [from: Developer Guide]</mark></p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="export-mechanism"><a class="link" href="#export-mechanism">Export mechanism</a></h3>
<div class="paragraph">
<p>The export mechanism is facilitated by java <code>File</code> and <code>FileOutputStream</code> class. It supports writing contact information into a <a href="#vCard">vCard</a> by creating a vCard format file.
This file will be saved in the application data folder where user can import it into other platforms such as Google Contacts.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../images/VcardClassDiagram.png" alt="VcardClassDiagram" width="400">
</div>
</div>
<div class="paragraph">
<p><em>Figure 5.4 Vcard Class Diagram</em></p>
</div>
<div class="paragraph">
<p>With reference to the class diagram of <code>Vcard</code> above, a <code>Vcard</code> object created is unique for every person that user wants to export. <code>Vcard</code> of each person contains a unique
String <code>cardDetails</code> that stores all information about the person such as <code>Name</code> and <code>Phone</code>.</p>
</div>
<div class="paragraph">
<p>The current version of vCard used is 3.0 as shown in the code example below:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>vCard format:</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> Vcard(ReadOnlyPerson person) {
    requireNonNull(person);
    <span class="comment">//get all information from the person</span>
    cardDetails = <span class="string"><span class="delimiter">&quot;</span><span class="content">BEGIN:VCARD</span><span class="char">\n</span><span class="delimiter">&quot;</span></span>
            + <span class="string"><span class="delimiter">&quot;</span><span class="content">VERSION:3.0</span><span class="char">\n</span><span class="delimiter">&quot;</span></span>
            + <span class="string"><span class="delimiter">&quot;</span><span class="content">FN:</span><span class="delimiter">&quot;</span></span> + name + <span class="string"><span class="delimiter">&quot;</span><span class="char">\n</span><span class="delimiter">&quot;</span></span>
            + <span class="string"><span class="delimiter">&quot;</span><span class="content">TEL;TYPE=MOBILE:</span><span class="delimiter">&quot;</span></span> + phone + <span class="string"><span class="delimiter">&quot;</span><span class="char">\n</span><span class="delimiter">&quot;</span></span>
            + <span class="string"><span class="delimiter">&quot;</span><span class="content">EMAIL;TYPE=WORK:</span><span class="delimiter">&quot;</span></span> + email + <span class="string"><span class="delimiter">&quot;</span><span class="char">\n</span><span class="delimiter">&quot;</span></span>
            + <span class="string"><span class="delimiter">&quot;</span><span class="content">BDAY:</span><span class="delimiter">&quot;</span></span> + birthday + <span class="string"><span class="delimiter">&quot;</span><span class="char">\n</span><span class="delimiter">&quot;</span></span>
            + <span class="string"><span class="delimiter">&quot;</span><span class="content">ADR;TYPE=HOME:;;</span><span class="delimiter">&quot;</span></span> + address + <span class="string"><span class="delimiter">&quot;</span><span class="char">\n</span><span class="delimiter">&quot;</span></span>
            + <span class="string"><span class="delimiter">&quot;</span><span class="content">END:VCARD</span><span class="delimiter">&quot;</span></span> + <span class="string"><span class="delimiter">&quot;</span><span class="char">\n</span><span class="delimiter">&quot;</span></span>;
}</code></pre>
</div>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>Next, a <code>File</code> will be created. In order to store all the <code>cardDetails</code> created earlier, <code>FileOutputStream</code> will call its
method write to write and saved all information in the <code>File</code> named as "contacts.vcf". An example of how the write method is executed is shown below:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>FileOutputStream write method:<br></p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="comment">// Creating an instance of FileOutputStream</span>
fos = <span class="keyword">new</span> <span class="predefined-type">FileOutputStream</span>(file);
<span class="comment">// For each Vcard created earlier</span>
    <span class="keyword">try</span> {
        <span class="comment">// cardDetails are first encoded before FileOutputStream writes the encoded string into the file.</span>
        fos.write(vCard.getCardDetails().getBytes());
    } <span class="keyword">catch</span> (<span class="exception">IOException</span> e) {
        <span class="comment">// Print exception</span>
    }
}</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<code>cardDetails</code> are first encoded into a sequence of bytes and stored in a byte array.
<code>FileOutputStream</code> calls the write method in order to write the encoded string into the file.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Finally, the directory that stores the "contacts.vcf" file will be shown to the user and the file can be imported to other platforms that support vCard files.</p>
</div>
<div class="sect3">
<h4 id="design-considerations"><a class="link" href="#design-considerations">Design Considerations</a></h4>
<div class="paragraph">
<p><strong>Aspect:</strong> Type of file to create<br>
<strong>Alternative 1 (current choice):</strong> Creates vCard file<br>
<strong>Pros:</strong> It is more flexible with the types of data that can be stored. Examples of include photos, multiple phone numbers and website information.<br>
<strong>Cons:</strong> It does not support importing of multiple contacts in vCard file for applications such as Outlook.<br>
<strong>Alternative 2:</strong> Creates <a href="#csv">CSV</a> file<br>
<strong>Pros:</strong> It is more readable and allows easy manipulation of the data in the file when used in spreadsheets such as Excel.<br>
<strong>Cons:</strong> It lacks of standardization whereby there are no rules in defining how contacts information are being written or read by other programs. It does not support programs such as iCloud as well.</p>
</div>
<div class="paragraph">
<p><mark>End of Extract</mark></p>
</div>
<hr>
</div>
</div>
<div class="sect2">
<h3 id="enhancement-added-email"><a class="link" href="#enhancement-added-email">Enhancement Added: Email</a></h3>
<div class="sect3">
<h4 id="external-behavior-2"><a class="link" href="#external-behavior-2">External behavior</a></h4>
<hr>
<div class="paragraph">
<p><mark>Start of Extract [from: User Guide]</mark></p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="sending-an-email-to-one-or-more-persons-code-email-code"><a class="link" href="#sending-an-email-to-one-or-more-persons-code-email-code">Sending an email to one or more persons: <code>email</code></a></h3>
<div class="paragraph">
<p>Emails one or more persons identified by the index number used in the last person listing.<br></p>
</div>
<div class="paragraph">
<p>Format: <code>email INDEX [INDEX]&#8230;&#8203;</code></p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="ulist">
<ul>
<li>
<p>The index refers to the index number shown in the most recent listing</p>
</li>
<li>
<p>The index <strong>must be a positive integer</strong> 1, 2, 3, &#8230;&#8203;</p>
</li>
<li>
<p>The person specified must have a valid email address.</p>
</li>
<li>
<p>Opens the default mail application in your desktop as shown below with the email addresses of the specified persons</p>
</li>
</ul>
</div>
</div>
</div>
<div class="paragraph">
<p><span class="image"><img src="../images/EmailWindow.png" alt="EmailWindow" width="790"></span>
<em>Figure 3.13. Default mail application in Windows 10</em></p>
</div>
<div class="exampleblock">
<div class="content">
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
You can set your own default mail application. Please refer to instructions in the <a href="#mailsettings">FAQ</a>.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="paragraph">
<p>Examples:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>list</code><br>
<code>email 2 3</code><br>
Opens the default mail application to send an email to the 2nd and 3rd persons from the list of contacts.</p>
</li>
<li>
<p><code>find Betsy</code><br>
<code>email 1</code><br>
Opens the default mail application to send an email to the 1st person in the results of the <code>find</code> command.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><mark>End of Extract</mark></p>
</div>
<hr>
<div class="sect3">
<h4 id="implementation-2"><a class="link" href="#implementation-2">Implementation</a></h4>
<hr>
<div class="paragraph">
<p><mark>Start of Extract [from: Developer Guide]</mark></p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="email-mechanism"><a class="link" href="#email-mechanism">Email mechanism</a></h3>
<div class="paragraph">
<p>The email mechanism is facilitated by java <code>Desktop</code> class which allows java application to launch default mail client registered on the users' native desktop to handle a Uniform Resource Indentifier <code>URI</code>.
In this case, the <a href="#uri">URI</a> is created with reference to the mail command scheme and email addresses to mail to.</p>
</div>
<div class="sect3">
<h4 id="email-command-implementation"><a class="link" href="#email-command-implementation">Email command implementation</a></h4>
<div class="imageblock">
<div class="content">
<img src="../images/EmailCommandSequenceDiagram.png" alt="EmailCommandSequenceDiagram" width="800">
</div>
</div>
<div class="paragraph">
<p><em>Figure 3.2.1 Email Command Sequence Diagram</em></p>
</div>
<div class="paragraph">
<p>From the diagram above, when users enter the command <code>email 1</code> to email a person in their address book.
<code>EmailCommandParser</code> will parse the arguments, which is a single index, provided by the user and stores it
in an array called <code>targetIndices</code> before returning a <code>EmailCommand</code>.</p>
</div>
<div class="paragraph">
<p>Next, <code>EmailCommand</code> will call its method <code>execute()</code> as shown below and ensures that <code>Index</code> specified is valid.
It also constructs a String <code>allEmaillAddresses</code> which contains the email addresses specified.<br></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Code listing:</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> CommandResult execute() <span class="directive">throws</span> CommandException {
    <span class="predefined-type">List</span>&lt;ReadOnlyPerson&gt; lastShownList = model.getFilteredPersonList();
    <span class="comment">// Constructs a StringBuilder to append all the names and email addresses</span>
    <span class="predefined-type">StringBuilder</span> addresses = <span class="keyword">new</span> <span class="predefined-type">StringBuilder</span>();
    <span class="predefined-type">StringBuilder</span> persons = <span class="keyword">new</span> <span class="predefined-type">StringBuilder</span>();
    <span class="keyword">for</span> (Index targetIndex : targetIndices) {
        <span class="keyword">if</span> (targetIndex.getZeroBased() &gt;= lastShownList.size()) {
            <span class="keyword">throw</span> <span class="keyword">new</span> CommandException(Messages.MESSAGE_INVALID_PERSON_DISPLAYED_INDEX
                    + targetIndex.getOneBased());
        }
        ReadOnlyPerson personToEmail = lastShownList.get(targetIndex.getZeroBased());
        <span class="comment">// Throws exception if personToEmail has no email address</span>
        <span class="keyword">if</span> (personToEmail.getEmail().toString().isEmpty()) {
            <span class="keyword">throw</span> <span class="keyword">new</span> CommandException(Messages.MESSAGE_INVALID_PERSON_TO_EMAIL + targetIndex.getOneBased());
        }
        <span class="comment">// Appends all names and email addresses of the persons to email</span>
        persons.append(<span class="string"><span class="delimiter">&quot;</span><span class="content">, </span><span class="delimiter">&quot;</span></span> + personToEmail.getName().toString());
        addresses.append(<span class="string"><span class="delimiter">&quot;</span><span class="content"> </span><span class="delimiter">&quot;</span></span> + personToEmail.getEmail().toString());
    }
    <span class="comment">// Removes the substring &quot;, &quot; at the start of the allPersons string</span>
    <span class="predefined-type">String</span> allPersons = persons.toString().trim().substring(<span class="integer">2</span>, persons.length());
    <span class="comment">// Replaces all white spaces in the addresses String with commas</span>
    <span class="predefined-type">String</span> allEmailAddresses = addresses.toString().trim().replaceAll(<span class="string"><span class="delimiter">&quot;</span><span class="content"> </span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">,</span><span class="delimiter">&quot;</span></span>);

    <span class="comment">// Post the EmailRequestEvent</span>
    EventsCenter.getInstance().post(<span class="keyword">new</span> EmailRequestEvent(allEmailAddresses));
    <span class="comment">// Returns CommandResult to display all person that user wants to email</span>
    <span class="keyword">return</span> <span class="keyword">new</span> CommandResult(<span class="predefined-type">String</span>.format(MESSAGE_EMAIL_PERSON_SUCCESS, allPersons));
}</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The String <code>allEmailAddresses</code> is constructed by appending a comma after each email address of a contact. This is done to ensure that it follows the mailing scheme required when
constructing a <code>URI</code>.
</td>
</tr>
</table>
</div>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="email-request-event-process"><a class="link" href="#email-request-event-process">Email request event process</a></h4>
<div class="imageblock">
<div class="content">
<img src="../images/EmailRequestEventSequenceDiagram.png" alt="EmailRequestEventSequenceDiagram" width="800">
</div>
</div>
<div class="paragraph">
<p><em>Figure 5.2.1 Email Request Event Sequence Diagram</em></p>
</div>
<div class="paragraph">
<p>With reference to the diagram above, after <code>EmailCommand</code> has executed, it will post a new <code>EmailRequestEvent</code> and allows the UI to handle this event. In the UI, we are using java <code>Desktop</code> class to
launch the default mail client registered on users' native desktop. A <code>URI</code> instance have to be created and pass to the mail method in the <code>Desktop</code> class.
Refer to the code example below:<br></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Code listing:</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">private</span> staic <span class="directive">final</span> <span class="predefined-type">String</span> EMAIL_URI_PREFIX = <span class="string"><span class="delimiter">&quot;</span><span class="content">mailTo:</span><span class="delimiter">&quot;</span></span>;

<span class="directive">public</span> <span class="type">void</span> handleEmail(<span class="predefined-type">String</span> allEmailAddresses) {
    <span class="predefined-type">URI</span> mailTo = <span class="predefined-constant">null</span>;
    <span class="keyword">try</span> {
        <span class="comment">// Creates a valid URI instance or throws an exception if syntax is wrong</span>
        mailTo = <span class="keyword">new</span> <span class="predefined-type">URI</span>(EMAIL_URI_PREFIX + allEmailAddresses);
    } <span class="keyword">catch</span> (<span class="exception">URISyntaxException</span> e) {
        e.printStackTrace();
    }
    <span class="comment">// Checks if Desktop operations can be supported</span>
    <span class="keyword">if</span> (Desktop.isDesktopSupported()) {
        <span class="comment">// Creates a Desktop instance if it is supported</span>
        Desktop userDesktop = Desktop.getDesktop();
        logger.info(<span class="string"><span class="delimiter">&quot;</span><span class="content">Showing user's default mail client</span><span class="delimiter">&quot;</span></span>);
        <span class="keyword">try</span> {
            <span class="comment">// Desktop mail method will launch user default mail client</span>
            userDesktop.mail(mailTo);
        } <span class="keyword">catch</span> (<span class="exception">IOException</span> e) {
            e.printStackTrace();
        }
    }
}</code></pre>
</div>
</div>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
To construct a valid <code>URI</code> instance, the String <code>EMAIL_URI_PREFIX</code> which specifies the scheme to launch user&#8217;s default mail client must be
followed by the String <code>allEmailAddresses</code>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Lastly, users' desktop will launch a default mail client where they can compose the subject and message body of the email.
Moreover, users can also edit their recipients field to include carbon copy or blind carbon copy before sending out
the email to their recipients.</p>
</div>
</div>
<div class="sect3">
<h4 id="design-consideration"><a class="link" href="#design-consideration">Design consideration</a></h4>
<div class="paragraph">
<p><strong>Aspect:</strong> Types of application to send emails<br>
<strong>Alternative 1 (current choice):</strong> Use user&#8217;s default mail client in their desktop<br>
<strong>Pros:</strong> The default mail client tends to load faster than the Javafx <code>WebView</code> used by the <code>BrowserPanel</code> in the <code>UI</code>.<br>
<strong>Cons:</strong> Some users may have set their default mail client as other applications such as web browser where they have to make changes before it can be used.<br>
<strong>Alternative 2:</strong> Use web browsers to access user email services online<br>
<strong>Pros:</strong> It is able to support more users as there are more options for different users using different email services.<br>
<strong>Cons:</strong> Since all users may not use the same email services such as <a href="#gmail">Gmail</a> or <a href="#outlook">Outlook</a>,
it is difficult to authorize every email services as some services such as Gmail which requires OAuth 2.0 protocol for authorization.<br></p>
</div>
<hr>
<div class="paragraph">
<p><strong>Aspect:</strong> Types of API used<br>
<strong>Alternative 1 (current choice):</strong> Use <code>Desktop</code> API<br>
<strong>Pros:</strong> It allows user to format their messages using text editor in default mail client.<br>
<strong>Cons:</strong> It does not require authentication if user has already configured so it may be misused if application is used by someone else.<br>
<strong>Alternative 2:</strong> Use <code>JavaMail</code> API<br>
<strong>Pros:</strong> It is able to support most email services such as Outlook.<br>
<strong>Cons:</strong> By entering username and password to authorize a session, there may be some security breaches if not encrypted properly.</p>
</div>
<div class="paragraph">
<p><mark>End of Extract</mark></p>
</div>
<hr>
</div>
</div>
<div class="sect2">
<h3 id="enhancement-proposed-to-be-updated"><a class="link" href="#enhancement-proposed-to-be-updated">Enhancement Proposed: to be updated</a></h3>

</div>
<div class="sect2">
<h3 id="other-contributions"><a class="link" href="#other-contributions">Other contributions</a></h3>
<div class="ulist">
<ul>
<li>
<p>Added Birthday field for a person</p>
</li>
<li>
<p>Modified search command to allow users to search for birthday</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2017-11-12 03:48:38 +00:00
</div>
</div>
</body>
</html>